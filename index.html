<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Invitación de Casamiento — Iván & Brenda</title>
  <meta name="description" content="Tarjeta de casamiento online de Iván y Brenda. 19 de Enero de 2026. Confirmar asistencia, ubicación, donaciones y álbum de fotos." />

  <!-- Tipografías elegantes y profesionales -->
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      /* Paleta profesional de boda */
      --ivory: #F7F3EA;
      --champagne: #EAD9C6;
      --gold: #C8A961;
      --rose: #D9A3A7;
      --ink: #2A2A2A;
      --shadow: rgba(0,0,0,0.35);
      --soft-shadow: rgba(0,0,0,0.12);
      --celeste: #2BB5FF;
    }

    * { box-sizing: border-box }
    html, body { height: 100% }
    body{
      margin:0;
      background: var(--ivory);
      color: var(--ink);
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif;
      overflow-x: hidden;
    }

    /* Fondo de boda difuminado con sombras */
    .bg{
      position: fixed;
      inset: 0;
      background:
        radial-gradient(ellipse at center, rgba(0,0,0,0.25) 0%, rgba(0,0,0,0.55) 100%),
        url('https://images.unsplash.com/photo-1519741497674-611481863552?q=80&w=1920&auto=format&fit=crop') center/cover no-repeat;
      filter: blur(3px) brightness(0.9);
      z-index: -2;
    }
    .bg-overlay{
      position: fixed;
      inset: 0;
      background: linear-gradient(to bottom, rgba(0,0,0,0.35), rgba(0,0,0,0.55));
      z-index: -1;
    }

    /* Contenedor principal */
    .wrap{
      max-width: 1080px;
      margin: 0 auto;
      padding: 28px 20px 80px;
    }

    /* Header con animaciones elegantes */
    header{
      text-align: center;
      padding: 80px 16px 36px;
      color: #fff;
    }
    .title{
      font-family: Cinzel, serif;
      font-weight: 700;
      font-size: clamp(34px, 6vw, 72px);
      letter-spacing: 1px;
      line-height: 1.1;
      text-shadow: 0 6px 22px rgba(0,0,0,0.5);
      animation: glow 4.5s ease-in-out infinite;
    }
    .subtitle{
      font-family: Cinzel, serif;
      font-weight: 600;
      font-size: clamp(18px, 3.2vw, 28px);
      color: #fff;
      opacity: 0.95;
      margin-top: 10px;
      animation: float 6s ease-in-out infinite;
    }
    .date-badge{
      display: inline-flex;
      gap: 12px;
      align-items: center;
      padding: 10px 16px;
      margin-top: 18px;
      border-radius: 999px;
      background: linear-gradient(90deg, rgba(200,169,97,0.22), rgba(233,214,175,0.22));
      backdrop-filter: blur(6px);
      color: #fff;
      border: 1px solid rgba(255,255,255,0.28);
      box-shadow: 0 6px 24px rgba(0,0,0,0.35);
    }
    .date-badge .dot{
      width:10px; height:10px; border-radius:50%;
      background: var(--gold);
      animation: pulse 1.6s infinite;
    }

    @keyframes glow{
      0%,100%{ text-shadow: 0 6px 22px rgba(0,0,0,0.5), 0 0 0 rgba(200,169,97,0) }
      50%{ text-shadow: 0 6px 22px rgba(0,0,0,0.5), 0 0 24px rgba(200,169,97,0.75) }
    }
    @keyframes float{
      0%,100%{ transform: translateY(0) }
      50%{ transform: translateY(-6px) }
    }
    @keyframes pulse{
      0%,100%{ transform: scale(1); opacity:1 }
      50%{ transform: scale(1.25); opacity:0.75 }
    }
    @keyframes shimmer{
      0%{ background-position: -200% 0 }
      100%{ background-position: 200% 0 }
    }
    .shimmer-text{
      background-image: linear-gradient(90deg, rgba(255,255,255,0.1), rgba(255,255,255,0.7), rgba(255,255,255,0.1));
      background-size: 200% 100%;
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      animation: shimmer 4s linear infinite;
    }

    /* Barra lateral música */
    .music-panel{
      position: fixed;
      top: 24px;
      right: 24px;
      display: flex;
      flex-direction: column;
      gap: 8px;
      z-index: 20;
    }
    .music-card{
      background: rgba(255,255,255,0.12);
      border: 1px solid rgba(255,255,255,0.4);
      backdrop-filter: blur(8px);
      color: #fff;
      padding: 12px 14px;
      border-radius: 12px;
      box-shadow: 0 8px 28px rgba(0,0,0,0.35);
      min-width: 220px;
    }
    .music-actions{
      display: flex; gap: 8px; margin-top: 8px;
    }
    .btn{
      appearance: none;
      border: none;
      border-radius: 10px;
      padding: 10px 14px;
      font-weight: 600;
      cursor: pointer;
      transition: transform .12s ease, box-shadow .12s ease, background .2s ease, color .2s ease;
    }
    .btn:active{ transform: translateY(1px) }
    .btn-gold{ background: var(--gold); color: #fff; box-shadow: 0 4px 12px rgba(200,169,97,0.45) }
    .btn-gold:hover{ filter: brightness(1.08) }
    .btn-ghost{ background: transparent; color: #fff; border: 1px solid rgba(255,255,255,0.6) }
    .btn-ghost:hover{ background: rgba(255,255,255,0.12) }

    /* Sección invitación */
    .card{
      background: rgba(255,255,255,0.78);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(0,0,0,0.06);
      border-radius: 16px;
      padding: 24px;
      margin: 26px auto;
      box-shadow: 0 12px 40px var(--soft-shadow);
    }
    .card h2{
      font-family: Cinzel, serif;
      font-size: clamp(22px, 3vw, 32px);
      margin: 0 0 12px;
    }
    .lead{
      font-size: clamp(16px, 2.2vw, 18px);
      color: #333;
    }
    .lead .celeste{
      color: var(--celeste);
      animation: blink 1.4s infinite;
      font-weight: 700;
    }
    @keyframes blink{
      0%,49%{ opacity:1 }
      50%,100%{ opacity:0.2 }
    }

    /* Detalles */
    .details{
      display: grid;
      grid-template-columns: repeat(3, minmax(0,1fr));
      gap: 16px;
      margin-top: 14px;
    }
    @media (max-width: 860px){
      .details{ grid-template-columns: 1fr }
    }
    .detail{
      background: #fff;
      border: 1px solid rgba(0,0,0,0.06);
      border-radius: 12px;
      padding: 16px;
      box-shadow: 0 8px 24px var(--soft-shadow);
      position: relative;
      overflow: hidden;
    }
    .detail::after{
      content:"";
      position:absolute; inset:0;
      background: linear-gradient(120deg, rgba(200,169,97,0.06), transparent 40%, rgba(200,169,97,0.08));
      animation: subtle 6s ease-in-out infinite;
      pointer-events:none;
    }
    @keyframes subtle{
      0%,100%{ opacity:0.4 } 50%{ opacity:0.7 }
    }
    .detail h3{
      font-family: Cinzel, serif;
      font-size: 18px;
      margin:0 0 8px;
      color: var(--ink);
    }
    .detail p{ margin: 6px 0; color: #444 }

    /* Álbum de fotos carrusel */
    .album{
      position: relative;
      margin-top: 24px;
      border-radius: 14px;
      overflow: hidden;
      border: 1px solid rgba(0,0,0,0.06);
      box-shadow: 0 12px 40px var(--soft-shadow);
      background: #fff;
    }
    .album-header{
      display: flex; align-items: center; justify-content: space-between;
      padding: 14px 16px;
      border-bottom: 1px solid rgba(0,0,0,0.06);
    }
    .album-header h3{
      font-family: Cinzel, serif;
      margin:0; font-size: 18px;
    }
    .strip{
      position: relative;
      height: 240px;
      overflow: hidden;
      background: #faf8f3;
    }
    .lane{
      display: flex;
      gap: 12px;
      position: absolute;
      top: 0; left: 0;
      padding: 12px;
      will-change: transform;
      animation: slide-left 18s linear infinite;
    }
    @keyframes slide-left{
      0%{ transform: translateX(0) }
      100%{ transform: translateX(-50%) }
    }
    .photo{
      flex: 0 0 320px;
      height: 216px;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 8px 24px var(--soft-shadow);
      position: relative;
      background: #ddd;
    }
    .photo img{
      width: 100%; height: 100%; object-fit: cover;
      filter: saturate(1.05) contrast(1.02);
      transform: scale(1.02);
    }
    .photo::after{
      content:"";
      position:absolute; inset:0;
      background: linear-gradient(to bottom, transparent, rgba(0,0,0,0.18));
    }

    /* Botones principales */
    .actions{
      display: flex; flex-wrap: wrap; gap: 12px;
      margin-top: 18px;
    }

    /* Modal genérico */
    .modal-backdrop{
      position: fixed; inset: 0; background: rgba(0,0,0,0.55);
      backdrop-filter: blur(4px); display: none; z-index: 50;
    }
    .modal{
      position: fixed; inset: 0; display: grid; place-items: center; z-index: 60; pointer-events: none;
    }
    .modal-panel{
      width: min(720px, 92vw);
      background: #fff;
      border-radius: 16px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.35);
      border: 1px solid rgba(0,0,0,0.08);
      overflow: hidden; pointer-events: auto;
      transform: translateY(16px);
      opacity: 0; scale: 0.98;
      transition: opacity .18s ease, transform .18s ease, scale .18s ease;
    }
    .modal.show .modal-panel{
      transform: translateY(0); opacity: 1; scale: 1;
    }
    .modal-head{
      display: flex; align-items: center; justify-content: space-between;
      padding: 12px 14px;
      background: linear-gradient(90deg, var(--champagne), #fff);
      border-bottom: 1px solid rgba(0,0,0,0.06);
    }
    .modal-title{
      font-family: Cinzel, serif; font-size: 18px; margin:0;
    }
    .close{
      width: 34px; height: 34px; border-radius: 50%;
      border: 1px solid rgba(0,0,0,0.14);
      background: #fff; cursor: pointer;
      display: grid; place-items: center; font-weight: 700;
    }
    .modal-body{ padding: 14px }
    .centered{ display: grid; place-items: center }

    /* Map modal specific */
    .map-frame{
      width: 100%; height: 420px; border: 0;
      border-radius: 8px; box-shadow: 0 8px 24px var(--soft-shadow);
    }

    /* Donación modal specific */
    .alias{
      font-family: Cinzel, serif;
      font-size: 22px;
      color: var(--gold);
      margin: 8px 0;
    }
    .note{
      background: #fffaf0;
      border: 1px dashed var(--gold);
      border-radius: 10px;
      padding: 10px 12px;
      color: #6a5b2e;
    }

    /* WhatsApp link */
    .wa{
      display: inline-flex; align-items: center; gap: 8px;
      text-decoration: none; color: #fff;
      background: #25D366; padding: 10px 14px; border-radius: 10px;
      font-weight: 700; box-shadow: 0 6px 18px rgba(37,211,102,0.4);
    }
    .wa:hover{ filter: brightness(1.06) }

    /* Footer */
    footer{
      text-align:center; color: #fff; padding: 40px 16px 80px;
    }
    .ring{
      display: inline-block;
      width: 18px; height: 18px;
      border: 3px solid var(--gold);
      border-radius: 50%;
      margin: 0 6px;
      animation: spin 6s linear infinite;
    }
    @keyframes spin{
      0%{ transform: rotate(0) } 100%{ transform: rotate(360deg) }
    }

    /* Pequeños iconos flotantes permanentes */
    .float-icons{
      position: fixed; bottom: 26px; left: 26px; pointer-events: none; z-index: 10;
    }
    .float-icons .dot{
      width: 9px; height: 9px; border-radius: 50%;
      background: var(--gold); margin: 6px;
      filter: drop-shadow(0 2px 6px rgba(0,0,0,0.25));
      animation: bob 3.6s ease-in-out infinite;
    }
    .float-icons .dot:nth-child(2){ animation-delay: .6s; background: var(--rose) }
    .float-icons .dot:nth-child(3){ animation-delay: 1.2s; background: var(--champagne) }
    @keyframes bob{
      0%,100%{ transform: translateY(0) }
      50%{ transform: translateY(-8px) }
    }

    /* Aviso celeste parpadeando (por ejemplo, “Vence hoy” adaptado a “Confirmá tu asistencia”) */
    .badge-celeste{
      display: inline-block;
      background: var(--celeste);
      color: #073b55;
      font-weight: 800;
      padding: 6px 10px;
      border-radius: 999px;
      box-shadow: 0 6px 16px rgba(43,181,255,0.35);
      animation: blink 1.4s infinite;
      margin-left: 8px;
    }

    /* Mensaje inicial para habilitar audio si el navegador lo bloquea */
    .audio-nudge{
      position: fixed; inset: 0; display: none; place-items: center; z-index: 100;
      background: rgba(0,0,0,0.5); backdrop-filter: blur(4px);
    }
    .audio-nudge .panel{
      background: #fff; border-radius: 14px; padding: 16px 18px;
      width: min(440px, 92vw); text-align: center;
      box-shadow: 0 18px 40px rgba(0,0,0,0.35);
    }
    .audio-nudge .panel h3{
      font-family: Cinzel, serif; margin: 6px 0 10px;
    }
  </style>
</head>
<body>
  <div class="bg"></div>
  <div class="bg-overlay"></div>

  <!-- Mensaje para habilitar audio (se intentará autoplay; si el navegador bloquea, mostramos este aviso) -->
  <div id="audioNudge" class="audio-nudge">
    <div class="panel">
      <h3>Activa la música</h3>
      <p>Tu navegador puede bloquear la reproducción automática. Tocá “Reproducir” para escuchar la canción.</p>
      <div style="margin-top: 12px">
        <button id="nudgePlay" class="btn btn-gold">Reproducir</button>
        <button id="nudgeClose" class="btn btn-ghost">Continuar sin sonido</button>
      </div>
    </div>
  </div>

  <!-- Panel música (YouTube) -->
  <aside class="music-panel">
    <div class="music-card">
      <div style="display:flex;align-items:center;gap:10px;">
        <div class="ring" aria-hidden="true"></div>
        <div>
          <div style="font-weight:700;">Música de fondo</div>
          <div style="font-size:13px;opacity:0.9;">Reproducir/Pausar a gusto</div>
        </div>
      </div>
      <div class="music-actions">
        <button id="playBtn" class="btn btn-gold">Reproducir</button>
        <button id="pauseBtn" class="btn btn-ghost">Parar la canción</button>
      </div>
    </div>
    <!-- Iframe YouTube oculto visualmente, controlado por la API -->
    <div style="width:0;height:0;overflow:hidden;">
      <div id="player"></div>
    </div>
  </aside>

  <header>
    <div class="title shimmer-text">Iván & Brenda</div>
    <div class="subtitle">Nos casamos y queremos celebrarlo con vos</div>
    <div class="date-badge">
      <span class="dot" aria-hidden="true"></span>
      <strong>19 de Enero de 2026</strong>
      <span class="dot" aria-hidden="true"></span>
    </div>
  </header>

  <main class="wrap">
    <section class="card">
      <h2>Te invitamos a nuestra boda</h2>
      <p class="lead">
        Con mucha alegría queremos compartir este día especial con vos. Tu presencia hace que todo sea más lindo.
        Prepará tus mejores deseos, tu sonrisa y ¡ganas de celebrar! <span class="celeste">Confirmá tu asistencia</span>
        para ayudarnos con la organización <span class="badge-celeste">Recordatorio</span>.
      </p>

      <div class="details">
        <div class="detail">
          <h3>Lugar y horario</h3>
          <p><strong>Ceremonia:</strong> 19:00 hs</p>
          <p><strong>Fiesta:</strong> 21:00 hs</p>
          <p><strong>Ubicación:</strong> San Juan, Argentina</p>
          <div class="actions">
            <button id="openMap" class="btn btn-gold">Ver ubicación</button>
          </div>
        </div>
        <div class="detail">
          <h3>Vestimenta</h3>
          <p><strong>Formal:</strong> Elegante y cómodo.</p>
          <p><strong>Ellas:</strong> Vestido largo o midi en tonos neutros, joyería discreta.</p>
          <p><strong>Ellos:</strong> Traje oscuro, camisa clara, corbata o moño. Zapatos de vestir.</p>
          <p><strong>Color guide:</strong> Marfil, champagne, dorado, rosa empolvado; evitar colores demasiado vibrantes.</p>
        </div>
        <div class="detail">
          <h3>Regalos y donaciones</h3>
          <p>Si querés sumar un granito de arena, ¡gracias! Lo más importante es que estés.</p>
          <div class="actions">
            <button id="openDonate" class="btn btn-gold">Donar alguito</button>
          </div>
        </div>
      </div>

      <div class="actions" style="margin-top: 18px;">
        <a class="wa" href="https://wa.me/?text=Hola%2C%20confirmo%20mi%20asistencia%20a%20la%20boda%20de%20Iv%C3%A1n%20y%20Brenda%20el%2019%20de%20enero%20de%202026" target="_blank" rel="noopener">
          <!-- simple whatsapp icon -->
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M20 3.9A9.9 9.9 0 0 0 12.1 4C7.2 4 3.2 8 3.2 12.9c0 1.6.4 3.2 1.2 4.6L3 22l4.6-1.2c1.4.8 3 .1 4.6.1 4.9 0 8.9-4 8.9-8.9 0-2.3-.9-4.6-2.5-6.1z" stroke="#fff" stroke-width="1.5"/>
            <path d="M8.6 10.6c0 3.8 3.1 6.9 6.9 6.9" stroke="#fff" stroke-width="1.5" stroke-linecap="round"/>
          </svg>
          Confirmar asistencia
        </a>
      </div>
    </section>

    <!-- Álbum de fotos con desplazamiento automático derecha -> izquierda en loop -->
    <section class="album">
      <div class="album-header">
        <h3>Álbum de fotos</h3>
        <small style="opacity:.7;">Preview en movimiento (muestra)</small>
      </div>
      <div class="strip">
        <div class="lane" id="lane">
          <!-- 8 fotos, se repetirán para efecto loop suave -->
          <div class="photo"><img src="https://images.unsplash.com/photo-1519741497674-611481863552?q=80&w=1200&auto=format&fit=crop" alt="Boda 1" /></div>
          <div class="photo"><img src="https://images.unsplash.com/photo-1511285560929-2b937e80d01e?q=80&w=1200&auto=format&fit=crop" alt="Boda 2" /></div>
          <div class="photo"><img src="https://images.unsplash.com/photo-1481833761820-0509d3217039?q=80&w=1200&auto=format&fit=crop" alt="Boda 3" /></div>
          <div class="photo"><img src="https://images.unsplash.com/photo-1520974735198-385b1325843d?q=80&w=1200&auto=format&fit=crop" alt="Boda 4" /></div>
          <div class="photo"><img src="https://images.unsplash.com/photo-1504215680853-026ed2a45def?q=80&w=1200&auto=format&fit=crop" alt="Boda 5" /></div>
          <div class="photo"><img src="https://images.unsplash.com/photo-1517638851339-4aa32003c11a?q=80&w=1200&auto=format&fit=crop" alt="Boda 6" /></div>
          <div class="photo"><img src="https://images.unsplash.com/photo-1516690553957-477f0bea6cd0?q=80&w=1200&auto=format&fit=crop" alt="Boda 7" /></div>
          <div class="photo"><img src="https://images.unsplash.com/photo-1505816185401-082d1c05a6fd?q=80&w=1200&auto=format&fit=crop" alt="Boda 8" /></div>
          <!-- duplicado para loop continuo -->
          <div class="photo"><img src="https://images.unsplash.com/photo-1519741497674-611481863552?q=80&w=1200&auto=format&fit=crop" alt="Boda 1b" /></div>
          <div class="photo"><img src="https://images.unsplash.com/photo-1511285560929-2b937e80d01e?q=80&w=1200&auto=format&fit=crop" alt="Boda 2b" /></div>
          <div class="photo"><img src="https://images.unsplash.com/photo-1481833761820-0509d3217039?q=80&w=1200&auto=format&fit=crop" alt="Boda 3b" /></div>
          <div class="photo"><img src="https://images.unsplash.com/photo-1520974735198-385b1325843d?q=80&w=1200&auto=format&fit=crop" alt="Boda 4b" /></div>
        </div>
      </div>
    </section>

    <!-- Acciones extra -->
    <section class="card">
      <h2>Información útil</h2>
      <p class="lead">Llegá con tiempo, disfrutá la música, sacate fotos, y preparate para una noche inolvidable. Si necesitás ayuda, escribinos por WhatsApp.</p>
      <div class="actions">
        <button id="openMap2" class="btn btn-ghost">Ver mapa</button>
        <a class="wa" href="https://wa.me/?text=Hola%2C%20tengo%20una%20consulta%20sobre%20la%20boda%20de%20Iv%C3%A1n%20y%20Brenda" target="_blank" rel="noopener">Escribir por WhatsApp</a>
      </div>
    </section>
  </main>

  <!-- Footer con animación suave -->
  <footer>
    Hecho con cariño para <strong>Iván</strong> y <strong>Brenda</strong> <span class="ring" aria-hidden="true"></span> Nos vemos el 19/01/2026
  </footer>

  <!-- Íconos flotantes permanentes -->
  <div class="float-icons" aria-hidden="true">
    <div class="dot"></div><div class="dot"></div><div class="dot"></div>
  </div>

  <!-- Modal Ubicación -->
  <div id="mapBackdrop" class="modal-backdrop"></div>
  <div id="mapModal" class="modal" aria-hidden="true" role="dialog" aria-label="Mapa de la boda">
    <div class="modal-panel">
      <div class="modal-head">
        <h4 class="modal-title">Ubicación — San Juan, Argentina</h4>
        <button class="close" id="closeMap" aria-label="Cerrar">×</button>
      </div>
      <div class="modal-body centered">
        <iframe class="map-frame" src="https://www.google.com/maps/embed?pb=!1m14!1m12!1m3!1d13602.286538585064!2d-68.51147105!3d-31.535923200000003!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!5e0!3m2!1ses-419!2sar!4v1762706946200!5m2!1ses-419!2sar" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
      </div>
    </div>
  </div>

  <!-- Modal Donación -->
  <div id="donBackdrop" class="modal-backdrop"></div>
  <div id="donModal" class="modal" aria-hidden="true" role="dialog" aria-label="Donaciones">
    <div class="modal-panel">
      <div class="modal-head">
        <h4 class="modal-title">Donaciones</h4>
        <button class="close" id="closeDonate" aria-label="Cerrar">×</button>
      </div>
      <div class="modal-body">
        <p>Tu gesto nos ayuda a construir nuestro hogar. ¡Gracias por acompañarnos con tanto cariño!</p>
        <div class="alias">Alias: <strong>bodaivan.xxxx</strong></div>
        <div class="note">Si te nace, podés donar “alguito”. Lo más valioso para nosotros es compartir este día con vos.</div>
      </div>
    </div>
  </div>

  <!-- YouTube Iframe API -->
  <script src="https://www.youtube.com/iframe_api"></script>
  <script>
    // Estado del reproductor
    let ytPlayer;
    let audioReady = false;
    let intendedPlay = true; // Intentamos reproducir automáticamente al cargar

    // Crea el reproductor YouTube con la canción indicada
    function onYouTubeIframeAPIReady(){
      ytPlayer = new YT.Player('player', {
        videoId: 'pJ7a7LCROOw', // ID del video de YouTube
        playerVars: {
          autoplay: 1,
          controls: 0,
          modestbranding: 1,
          loop: 1,
          playlist: 'pJ7a7LCROOw',
          fs: 0,
          rel: 0
        },
        events: {
          'onReady': onPlayerReady,
          'onStateChange': onStateChange
        }
      });
    }

    function onPlayerReady(){
      audioReady = true;
      // Intento de autoplay (algunos navegadores lo bloquean si no hay interacción del usuario)
      try {
        ytPlayer.playVideo();
        // Intento de asegurar sonido (si queda muteado, el nudge ofrece habilitar)
        ytPlayer.unMute && ytPlayer.unMute();
      } catch(e){
        // Si falla, mostramos el nudge
        showAudioNudge();
      }

      // Si el navegador bloqueó, verificamos estado y ofrecemos nudge
      setTimeout(() => {
        const state = ytPlayer.getPlayerState();
        // 1: playing, 2: paused, 0: ended, 3: buffering, 5: cued
        if(state !== 1){
          showAudioNudge();
        }
      }, 600);
    }

    function onStateChange(e){
      // Si el usuario presiona "Parar", no reintentar
    }

    // Controles UI
    const playBtn = document.getElementById('playBtn');
    const pauseBtn = document.getElementById('pauseBtn');

    playBtn.addEventListener('click', () => {
      if(ytPlayer){
        ytPlayer.playVideo();
        ytPlayer.unMute && ytPlayer.unMute();
      }
      hideAudioNudge();
    });

    pauseBtn.addEventListener('click', () => {
      if(ytPlayer){
        ytPlayer.pauseVideo();
      }
    });

    // Audio nudge
    const audioNudge = document.getElementById('audioNudge');
    const nudgePlay = document.getElementById('nudgePlay');
    const nudgeClose = document.getElementById('nudgeClose');

    function showAudioNudge(){
      audioNudge.style.display = 'grid';
    }
    function hideAudioNudge(){
      audioNudge.style.display = 'none';
    }
    nudgePlay.addEventListener('click', () => {
      if(ytPlayer){
        ytPlayer.playVideo();
        ytPlayer.unMute && ytPlayer.unMute();
      }
      hideAudioNudge();
    });
    nudgeClose.addEventListener('click', () => hideAudioNudge());

    // Modales: Mapa
    const mapModal = document.getElementById('mapModal');
    const mapBackdrop = document.getElementById('mapBackdrop');
    const openMap = document.getElementById('openMap');
    const openMap2 = document.getElementById('openMap2');
    const closeMap = document.getElementById('closeMap');

    function showModal(modal, backdrop){
      modal.classList.add('show');
      modal.style.display = 'grid';
      backdrop.style.display = 'block';
    }
    function hideModal(modal, backdrop){
      modal.classList.remove('show');
      modal.style.display = 'none';
      backdrop.style.display = 'none';
    }

    openMap.addEventListener('click', () => showModal(mapModal, mapBackdrop));
    openMap2.addEventListener('click', () => showModal(mapModal, mapBackdrop));
    closeMap.addEventListener('click', () => hideModal(mapModal, mapBackdrop));
    mapBackdrop.addEventListener('click', () => hideModal(mapModal, mapBackdrop));

    // Modal: Donación
    const donModal = document.getElementById('donModal');
    const donBackdrop = document.getElementById('donBackdrop');
    const openDonate = document.getElementById('openDonate');
    const closeDonate = document.getElementById('closeDonate');

    openDonate.addEventListener('click', () => showModal(donModal, donBackdrop));
    closeDonate.addEventListener('click', () => hideModal(donModal, donBackdrop));
    donBackdrop.addEventListener('click', () => hideModal(donModal, donBackdrop));

    // Álbum: duplicación de elementos para loop suave si hace falta (seguridad)
    (function ensureLongLane(){
      const lane = document.getElementById('lane');
      const items = [...lane.children];
      const minWidth = window.innerWidth * 2;
      let total = 0;
      items.forEach(it => total += it.getBoundingClientRect().width + 12);
      if(total < minWidth){
        items.forEach(it => lane.appendChild(it.cloneNode(true)));
      }
    })();
  </script>
</body>
</html>

