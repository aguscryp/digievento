```html
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Invitación de Casamiento — Iván & Brenda</title>
  <meta name="description" content="Tarjeta de casamiento online de Iván y Brenda. 19 de Enero de 2026. Confirmar asistencia, ubicación, donaciones y álbum de fotos." />

  <!-- Tipografías -->
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

  <!-- Leaflet (mapa rápido, navegable, sin iniciar sesión) -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tG0uZmfC7U6Bq1Hq+PpI=" crossorigin="anonymous">
  <style>
    :root{
      /* Paleta profesional de boda */
      --ivory: #F7F3EA;
      --champagne: #EAD9C6;
      --gold: #C8A961;
      --rose: #D9A3A7;
      --ink: #2A2A2A;
      --soft-shadow: rgba(0,0,0,0.16);
      --celeste: #2BB5FF;
      --celeste-text: #073b55;
      --white: #ffffff;
    }

    *{box-sizing:border-box}
    html, body{height:100%}
    body{
      margin:0; background:var(--ivory); color:var(--ink);
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif;
      overflow-x:hidden;
    }

    /* Fondo de casamiento mejorado: blur + viñeta + sombras y velo dorado suave */
    .bg{
      position:fixed; inset:0;
      background:
        /* Vignette radial */
        radial-gradient(ellipse at center, rgba(0,0,0,0.25) 0%, rgba(0,0,0,0.55) 100%),
        /* Imagen de bodas de alta calidad */
        url('https://images.unsplash.com/photo-1520974735198-385b1325843d?auto=format&fit=crop&w=2400&q=90') center/cover no-repeat;
      filter:blur(4px) brightness(0.95) contrast(1.02) saturate(1.06);
      z-index:-3;
    }
    /* Velo superior con degradado y “sombras” sutiles para separar contenido */
    .bg::after{
      content:""; position:absolute; inset:0;
      background:
        linear-gradient(to bottom, rgba(0,0,0,0.35), rgba(0,0,0,0.55)),
        radial-gradient(1200px 500px at 15% 5%, rgba(0,0,0,0.22), transparent 60%),
        radial-gradient(900px 400px at 85% 100%, rgba(0,0,0,0.25), transparent 60%),
        linear-gradient(120deg, rgba(200,169,97,0.06), rgba(255,255,255,0.0), rgba(200,169,97,0.08));
      z-index:-2;
    }
    /* Capa extra para asegurarnos de un contraste impecable en textos */
    .bg-overlay{
      position:fixed; inset:0;
      background:linear-gradient(to bottom, rgba(0,0,0,0.22), rgba(0,0,0,0.45));
      z-index:-1;
    }

    /* Responsive container */
    .wrap{
      width:100%;
      max-width:1100px;
      margin:0 auto;
      padding:24px 16px 120px;
    }

    /* Header */
    header{
      text-align:center; color:#fff;
      padding:72px 16px 40px;
    }
    .title{
      font-family:Cinzel, serif;
      font-weight:700;
      font-size:clamp(34px, 6vw, 72px);
      letter-spacing:1px; line-height:1.1;
      text-shadow:0 8px 28px rgba(0,0,0,0.55);
      animation:glow 4.5s ease-in-out infinite;
    }
    .subtitle{
      font-family:Cinzel, serif;
      font-weight:600;
      font-size:clamp(18px, 3.2vw, 28px);
      opacity:0.95; margin-top:12px;
      animation:float 6s ease-in-out infinite;
    }
    .date-badge{
      display:inline-flex; gap:12px; align-items:center;
      padding:10px 16px; margin-top:18px; border-radius:999px;
      background:linear-gradient(90deg, rgba(200,169,97,0.22), rgba(233,214,175,0.22));
      backdrop-filter:blur(6px); color:#fff;
      border:1px solid rgba(255,255,255,0.28);
      box-shadow:0 8px 32px rgba(0,0,0,0.45);
    }
    .date-badge .dot{
      width:10px; height:10px; border-radius:50%; background:var(--gold);
      animation:pulse 1.6s infinite;
    }

    @keyframes glow{
      0%,100%{ text-shadow:0 8px 28px rgba(0,0,0,0.55), 0 0 0 rgba(200,169,97,0) }
      50%{ text-shadow:0 8px 28px rgba(0,0,0,0.55), 0 0 26px rgba(200,169,97,0.85) }
    }
    @keyframes float{ 0%,100%{transform:translateY(0)} 50%{transform:translateY(-6px)} }
    @keyframes pulse{ 0%,100%{transform:scale(1);opacity:1} 50%{transform:scale(1.25);opacity:0.75} }
    @keyframes shimmer{
      0%{ background-position:-200% 0 } 100%{ background-position:200% 0 }
    }
    .shimmer-text{
      background-image:linear-gradient(90deg, rgba(255,255,255,0.1), rgba(255,255,255,0.8), rgba(255,255,255,0.1));
      background-size:200% 100%;
      -webkit-background-clip:text; background-clip:text; color:transparent;
      animation:shimmer 4s linear infinite;
    }

    /* Tarjetas */
    .card{
      background:rgba(255,255,255,0.92);
      backdrop-filter:blur(10px);
      border-radius:18px;
      padding:22px;
      margin:26px auto;
      border:1px solid rgba(0,0,0,0.06);
      /* Sombra mejorada */
      box-shadow:
        0 30px 60px rgba(0,0,0,0.28),
        0 12px 24px rgba(0,0,0,0.18);
    }
    .card h2{
      font-family:Cinzel, serif;
      font-size:clamp(22px, 3vw, 32px);
      margin:0 0 12px;
    }
    .lead{
      font-size:clamp(16px, 2.2vw, 18px);
      color:#333;
    }

    /* Animaciones mejoradas para “Confirmá tu asistencia / Recordatorio” */
    .lead .cta{
      display:inline-flex; align-items:center; gap:8px;
      padding:4px 10px; border-radius:999px;
      background:linear-gradient(90deg, #eaf7ff, #ffffff);
      border:1px solid rgba(43,181,255,0.4);
      color:#0b5e84; font-weight:800;
      box-shadow:0 6px 16px rgba(43,181,255,0.25);
      position:relative;
      overflow:hidden;
    }
    .lead .cta::after{
      content:"";
      position:absolute; inset:0;
      background:linear-gradient(120deg, transparent 0%, rgba(43,181,255,0.15) 50%, transparent 100%);
      animation:cta-shine 2.4s linear infinite;
    }
    @keyframes cta-shine{
      0%{ transform:translateX(-100%) }
      100%{ transform:translateX(100%) }
    }

    .badge-celeste{
      display:inline-block; margin-left:8px;
      background:var(--celeste); color:var(--celeste-text);
      font-weight:900; padding:6px 10px; border-radius:999px;
      box-shadow:0 8px 20px rgba(43,181,255,0.35);
      /* efecto pulso + balanceo suave */
      animation:badge-pulse 1.6s ease-in-out infinite, badge-sway 5s ease-in-out infinite;
    }
    @keyframes badge-pulse{
      0%,100%{ transform:scale(1); opacity:1 }
      50%{ transform:scale(1.08); opacity:0.85 }
    }
    @keyframes badge-sway{
      0%,100%{ transform:translateY(0) rotate(0deg) }
      50%{ transform:translateY(-2px) rotate(1.2deg) }
    }

    /* Grid de detalles responsive */
    .details{
      display:grid; gap:16px; margin-top:14px;
      grid-template-columns:repeat(3, minmax(0,1fr));
    }
    @media (max-width:980px){ .details{ grid-template-columns:repeat(2, minmax(0,1fr)) } }
    @media (max-width:640px){ .details{ grid-template-columns:1fr } }

    .detail{
      background:#fff; border:1px solid rgba(0,0,0,0.06);
      border-radius:14px; padding:16px;
      box-shadow:
        0 26px 46px rgba(0,0,0,0.22),
        0 10px 22px rgba(0,0,0,0.16);
      position:relative; overflow:hidden;
    }
    .detail h3{
      font-family:Cinzel, serif;
      font-size:18px; margin:0 0 8px; color:var(--ink);
    }
    .detail p{ margin:6px 0; color:#444 }

    .actions{
      display:flex; flex-wrap:wrap; gap:12px; margin-top:18px;
    }

    /* Botones */
    .btn{
      appearance:none; border:none; border-radius:10px;
      padding:10px 14px; font-weight:700; cursor:pointer;
      transition:transform .12s ease, box-shadow .12s ease, filter .2s ease;
    }
    .btn:active{ transform:translateY(1px) }
    .btn-gold{ background:var(--gold); color:#fff; box-shadow:0 6px 18px rgba(200,169,97,0.45) }
    .btn-gold:hover{ filter:brightness(1.08) }
    .btn-ghost{ background:transparent; color:#333; border:1px solid rgba(0,0,0,0.15) }
    .btn-ghost:hover{ filter:brightness(1.06) }

    /* WhatsApp */
    .wa{
      display:inline-flex; align-items:center; gap:8px;
      text-decoration:none; color:#fff; background:#25D366;
      padding:10px 14px; border-radius:10px; font-weight:800;
      box-shadow:0 6px 18px rgba(37,211,102,0.4);
    }
    .wa:hover{ filter:brightness(1.06) }

    /* Álbum de fotos auto deslizante */
    .album{
      position:relative; margin-top:24px;
      border-radius:14px; overflow:hidden;
      border:1px solid rgba(0,0,0,0.06);
      box-shadow:0 22px 52px rgba(0,0,0,0.28), 0 10px 24px rgba(0,0,0,0.16);
      background:#fff;
    }
    .album-header{
      display:flex; align-items:center; justify-content:space-between;
      padding:14px 16px; border-bottom:1px solid rgba(0,0,0,0.06);
    }
    .album-header h3{ font-family:Cinzel, serif; margin:0; font-size:18px }
    .strip{
      position:relative; height:240px; overflow:hidden; background:#faf8f3;
    }
    .lane{
      display:flex; gap:12px; position:absolute; top:0; left:0; padding:12px;
      will-change:transform; animation:slide-left 22s linear infinite;
    }
    @keyframes slide-left{ 0%{transform:translateX(0)} 100%{transform:translateX(-50%)} }
    .photo{
      flex:0 0 300px; height:210px; border-radius:12px; overflow:hidden;
      box-shadow:0 12px 28px rgba(0,0,0,0.22);
      background:#ddd; position:relative;
    }
    .photo img{
      width:100%; height:100%; object-fit:cover;
      filter:saturate(1.05) contrast(1.02); transform:scale(1.02);
    }
    .photo::after{
      content:""; position:absolute; inset:0;
      background:linear-gradient(to bottom, transparent, rgba(0,0,0,0.18));
    }

    /* Footer */
    footer{ text-align:center; color:#fff; padding:40px 16px 120px }
    .ring{
      display:inline-block; width:18px; height:18px; border:3px solid var(--gold);
      border-radius:50%; margin:0 6px; animation:spin 6s linear infinite;
    }
    @keyframes spin{ 0%{transform:rotate(0)} 100%{transform:rotate(360deg)} }

    /* Íconos flotantes */
    .float-icons{ position:fixed; bottom:26px; left:26px; pointer-events:none; z-index:10 }
    .float-icons .dot{
      width:9px; height:9px; border-radius:50%;
      background:var(--gold); margin:6px;
      filter:drop-shadow(0 2px 6px rgba(0,0,0,0.25));
      animation:bob 3.6s ease-in-out infinite;
    }
    .float-icons .dot:nth-child(2){ animation-delay:.6s; background:var(--rose) }
    .float-icons .dot:nth-child(3){ animation-delay:1.2s; background:var(--champagne) }
    @keyframes bob{ 0%,100%{transform:translateY(0)} 50%{transform:translateY(-8px)} }

    /* Panel música abajo (responsive) */
    .music-panel{
      position:fixed; bottom:20px; right:20px; left:auto; z-index:30;
      display:flex; flex-direction:column; gap:8px;
    }
    @media (max-width:600px){
      .music-panel{ left:16px; right:16px }
    }
    .music-card{
      background:rgba(255,255,255,0.95);
      border:1px solid rgba(0,0,0,0.06);
      backdrop-filter:blur(8px);
      color:#222; padding:12px 14px; border-radius:12px;
      box-shadow:0 20px 44px rgba(0,0,0,0.35);
      min-width:220px;
    }
    .music-actions{ display:flex; gap:8px; margin-top:8px; flex-wrap:wrap }

    /* Modales con animación al abrir/cerrar */
    .modal-backdrop{
      position:fixed; inset:0; background:rgba(0,0,0,0.0);
      backdrop-filter:blur(0px); display:none; z-index:50;
      opacity:0;
    }
    .modal{
      position:fixed; inset:0; display:none; place-items:center; z-index:60;
    }
    .modal-panel{
      width:min(720px, 92vw); background:#fff; border-radius:16px;
      box-shadow:0 24px 70px rgba(0,0,0,0.45); border:1px solid rgba(0,0,0,0.08);
      overflow:hidden; transform:translateY(14px) scale(0.98); opacity:0;
    }
    /* Animaciones */
    @keyframes backdrop-fade {
      0% { opacity:0; backdrop-filter:blur(0px); background:rgba(0,0,0,0.0); }
      100% { opacity:1; backdrop-filter:blur(4px); background:rgba(0,0,0,0.55); }
    }
    @keyframes pop-in {
      0% { transform:translateY(16px) scale(0.96); opacity:0; }
      60% { transform:translateY(0) scale(1.02); opacity:1; }
      100% { transform:translateY(0) scale(1.0); opacity:1; }
    }
    @keyframes pop-out {
      0% { transform:translateY(0) scale(1.0); opacity:1; }
      100% { transform:translateY(12px) scale(0.98); opacity:0; }
    }
    .modal-head{
      display:flex; align-items:center; justify-content:space-between;
      padding:12px 14px; background:linear-gradient(90deg, var(--champagne), #fff);
      border-bottom:1px solid rgba(0,0,0,0.06);
    }
    .modal-title{ font-family:Cinzel, serif; font-size:18px; margin:0 }
    .close{
      width:34px; height:34px; border-radius:50%; border:1px solid rgba(0,0,0,0.14);
      background:#fff; cursor:pointer; display:grid; place-items:center; font-weight:700;
    }
    .modal-body{ padding:14px }
    .centered{ display:grid; place-items:center }

    /* Mapa Leaflet */
    .map-frame{
      width:100%; height:480px; border:0; border-radius:12px;
      box-shadow:0 14px 32px var(--soft-shadow);
      overflow:hidden;
    }

    /* Donación */
    .alias{
      font-family:Cinzel, serif; font-size:22px; color:var(--gold); margin:8px 0;
    }
    .note{
      background:#fffaf0; border:1px dashed var(--gold); border-radius:10px; padding:10px 12px; color:#6a5b2e;
    }

    /* Aviso para habilitar audio si el navegador lo bloquea */
    .audio-nudge{
      position:fixed; inset:0; display:none; place-items:center; z-index:100;
      background:rgba(0,0,0,0.5); backdrop-filter:blur(4px);
    }
    .audio-nudge .panel{
      background:#fff; border-radius:14px; padding:16px 18px; width:min(440px, 92vw); text-align:center;
      box-shadow:0 18px 40px rgba(0,0,0,0.35);
    }
    .audio-nudge .panel h3{ font-family:Cinzel, serif; margin:6px 0 10px }
  </style>
</head>
<body>
  <div class="bg"></div>
  <div class="bg-overlay"></div>

  <!-- Nudge de audio -->
  <div id="audioNudge" class="audio-nudge">
    <div class="panel">
      <h3>Recibir invitación</h3>
      <p>Tu navegador puede bloquear la reproducción automática. Tocá “Recibir invitación” para activar la música.</p>
      <div style="margin-top:12px">
        <button id="nudgePlay" class="btn btn-gold">Recibir invitación</button>
        <button id="nudgeClose" class="btn btn-ghost">Continuar sin sonido</button>
      </div>
    </div>
  </div>

  <!-- Panel música (abajo) -->
  <aside class="music-panel">
    <div class="music-card">
      <div style="display:flex;align-items:center;gap:10px;">
        <div class="ring" aria-hidden="true"></div>
        <div>
          <div style="font-weight:800;">Música de fondo</div>
          <div style="font-size:13px;opacity:0.8;">Controlá la invitación sonora</div>
        </div>
      </div>
      <div class="music-actions">
        <!-- Cambio solicitado: “Recibir invitación” -->
        <button id="playBtn" class="btn btn-gold">Recibir invitación</button>
        <button id="pauseBtn" class="btn btn-ghost">Parar la canción</button>
      </div>
    </div>
    <!-- Iframe YouTube oculto, controlado por API -->
    <div style="width:0;height:0;overflow:hidden;">
      <div id="player"></div>
    </div>
  </aside>

  <header>
    <div class="title shimmer-text">Iván & Brenda</div>
    <div class="subtitle">Nos casamos y queremos celebrarlo con vos</div>
    <div class="date-badge">
      <span class="dot" aria-hidden="true"></span>
      <strong>19 de Enero de 2026</strong>
      <span class="dot" aria-hidden="true"></span>
    </div>
  </header>

  <main class="wrap">
    <section class="card">
      <h2>Te invitamos a nuestra boda</h2>
      <p class="lead">
        Con mucha alegría queremos compartir este día especial con vos. Tu presencia hace que todo sea más lindo.
        Prepará tus mejores deseos, tu sonrisa y ¡ganas de celebrar!
        <span class="cta">Confirmá tu asistencia</span>
        <span class="badge-celeste">Recordatorio</span>
      </p>

      <div class="details">
        <div class="detail">
          <h3>Lugar y horario</h3>
          <p><strong>Ceremonia:</strong> 19:00 hs</p>
          <p><strong>Fiesta:</strong> 21:00 hs</p>
          <p><strong>Ubicación:</strong> San Juan, Argentina</p>
          <div class="actions">
            <button id="openMap" class="btn btn-gold">Ver ubicación</button>
          </div>
        </div>
        <div class="detail">
          <h3>Vestimenta</h3>
          <p><strong>Formal:</strong> Elegante y cómodo.</p>
          <p><strong>Ellas:</strong> Vestido largo o midi en tonos neutros; joyería discreta; tacones o sandalias elegantes.</p>
          <p><strong>Ellos:</strong> Traje oscuro, camisa clara, corbata o moño; zapatos de vestir.</p>
          <p><strong>Colores sugeridos:</strong> Marfil, champagne, dorado, rosa empolvado. Evitar tonos fluorescentes.</p>
        </div>
        <div class="detail">
          <h3>Regalos y donaciones</h3>
          <p>Si querés sumar un granito de arena, ¡gracias! Lo más importante es que estés.</p>
          <div class="actions">
            <button id="openDonate" class="btn btn-gold">Donar alguito</button>
          </div>
        </div>
      </div>

      <div class="actions" style="margin-top: 18px;">
        <a class="wa" href="https://wa.me/?text=Hola%2C%20confirmo%20mi%20asistencia%20a%20la%20boda%20de%20Iv%C3%A1n%20y%20Brenda%20el%2019%2F01%2F2026" target="_blank" rel="noopener">
          <!-- ícono simple de WhatsApp -->
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M20 3.9A9.9 9.9 0 0 0 12.1 4C7.2 4 3.2 8 3.2 12.9c0 1.6.4 3.2 1.2 4.6L3 22l4.6-1.2c1.4.8 3 .1 4.6.1 4.9 0 8.9-4 8.9-8.9 0-2.3-.9-4.6-2.5-6.1z" stroke="#fff" stroke-width="1.5"/>
            <path d="M8.6 10.6c0 3.8 3.1 6.9 6.9 6.9" stroke="#fff" stroke-width="1.5" stroke-linecap="round"/>
          </svg>
          Confirmar asistencia
        </a>
      </div>
    </section>

    <!-- Álbum de fotos -->
    <section class="album">
      <div class="album-header">
        <h3>Álbum de fotos</h3>
        <small style="opacity:.75;">Preview en movimiento (muestra)</small>
      </div>
      <div class="strip">
        <div class="lane" id="lane">
          <!-- Imágenes de muestra robustas -->
          <div class="photo"><img src="https://images.unsplash.com/photo-1519741497674-611481863552?auto=format&fit=crop&w=1400&q=80" alt="Boda 1" /></div>
          <div class="photo"><img src="https://images.unsplash.com/photo-1516690553957-477f0bea6cd0?auto=format&fit=crop&w=1400&q=80" alt="Boda 2" /></div>
          <div class="photo"><img src="https://images.unsplash.com/photo-1481833761820-0509d3217039?auto=format&fit=crop&w=1400&q=80" alt="Boda 3" /></div>
          <div class="photo"><img src="https://images.unsplash.com/photo-1520974735198-385b1325843d?auto=format&fit=crop&w=1400&q=80" alt="Boda 4" /></div>
          <div class="photo"><img src="https://images.unsplash.com/photo-1504215680853-026ed2a45def?auto=format&fit=crop&w=1400&q=80" alt="Boda 5" /></div>
          <div class="photo"><img src="https://images.unsplash.com/photo-1517638851339-4aa32003c11a?auto=format&fit=crop&w=1400&q=80" alt="Boda 6" /></div>
          <div class="photo"><img src="https://images.unsplash.com/photo-1505816185401-082d1c05a6fd?auto=format&fit=crop&w=1400&q=80" alt="Boda 7" /></div>
          <div class="photo"><img src="https://images.unsplash.com/photo-1511285560929-2b937e80d01e?auto=format&fit=crop&w=1400&q=80" alt="Boda 8" /></div>
          <!-- duplicado para loop -->
          <div class="photo"><img src="https://images.unsplash.com/photo-1519741497674-611481863552?auto=format&fit=crop&w=1400&q=80" alt="Boda 1b" /></div>
          <div class="photo"><img src="https://images.unsplash.com/photo-1516690553957-477f0bea6cd0?auto=format&fit=crop&w=1400&q=80" alt="Boda 2b" /></div>
          <div class="photo"><img src="https://images.unsplash.com/photo-1481833761820-0509d3217039?auto=format&fit=crop&w=1400&q=80" alt="Boda 3b" /></div>
          <div class="photo"><img src="https://images.unsplash.com/photo-1520974735198-385b1325843d?auto=format&fit=crop&w=1400&q=80" alt="Boda 4b" /></div>
        </div>
      </div>
    </section>

    <!-- Extra info -->
    <section class="card">
      <h2>Información útil</h2>
      <p class="lead">Llegá con tiempo, disfrutá la música, sacate fotos, y preparate para una noche inolvidable. Si necesitás ayuda, escribinos por WhatsApp.</p>
      <div class="actions">
        <button id="openMap2" class="btn btn-ghost">Ver mapa</button>
        <a class="wa" href="https://wa.me/?text=Hola%2C%20tengo%20una%20consulta%20sobre%20la%20boda%20de%20Iv%C3%A1n%20y%20Brenda" target="_blank" rel="noopener">Escribir por WhatsApp</a>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer>
    Hecho con cariño para <strong>Iván</strong> y <strong>Brenda</strong> <span class="ring" aria-hidden="true"></span> Nos vemos el 19/01/2026
  </footer>

  <!-- Íconos flotantes -->
  <div class="float-icons" aria-hidden="true">
    <div class="dot"></div><div class="dot"></div><div class="dot"></div>
  </div>

  <!-- Modal Ubicación (Leaflet) -->
  <div id="mapBackdrop" class="modal-backdrop"></div>
  <div id="mapModal" class="modal" aria-hidden="true" role="dialog" aria-label="Mapa de la boda">
    <div class="modal-panel">
      <div class="modal-head">
        <h4 class="modal-title">Ubicación — San Juan, Argentina</h4>
        <button class="close" id="closeMap" aria-label="Cerrar">×</button>
      </div>
      <div class="modal-body centered">
        <!-- Mapa navegable y rápido sin login -->
        <div id="leafletMap" class="map-frame"></div>
      </div>
    </div>
  </div>

  <!-- Modal Donación -->
  <div id="donBackdrop" class="modal-backdrop"></div>
  <div id="donModal" class="modal" aria-hidden="true" role="dialog" aria-label="Donaciones">
    <div class="modal-panel">
      <div class="modal-head">
        <h4 class="modal-title">Donaciones</h4>
        <button class="close" id="closeDonate" aria-label="Cerrar">×</button>
      </div>
      <div class="modal-body">
        <p>Tu gesto nos ayuda a construir nuestro hogar. ¡Gracias por acompañarnos con tanto cariño!</p>
        <div class="alias">Alias: <strong>bodaivan.xxxx</strong></div>
        <div class="note">Si te nace, podés donar “alguito”. Lo más valioso para nosotros es compartir este día con vos.</div>
      </div>
    </div>
  </div>

  <!-- YouTube Iframe API -->
  <script src="https://www.youtube.com/iframe_api"></script>
  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z1Fs4qguF22SpQGT2IoE=" crossorigin="anonymous"></script>
  <script>
    // Estado del reproductor
    let ytPlayer;

    // Crea el reproductor YouTube con la canción indicada
    function onYouTubeIframeAPIReady(){
      ytPlayer = new YT.Player('player', {
        videoId: 'pJ7a7LCROOw', // ID del video
        playerVars: {
          autoplay: 1,
          controls: 0,
          modestbranding: 1,
          loop: 1,
          playlist: 'pJ7a7LCROOw',
          fs: 0,
          rel: 0
        },
        events: {
          'onReady': onPlayerReady
        }
      });
    }

    function onPlayerReady(){
      // Intento autoplay (algunos navegadores lo bloquean)
      try {
        ytPlayer.playVideo();
        ytPlayer.unMute && ytPlayer.unMute();
      } catch(e){
        showAudioNudge();
      }
      // Verifica estado luego de un instante; si no reproduce, muestra nudge
      setTimeout(() => {
        const state = ytPlayer.getPlayerState();
        // 1: playing
        if(state !== 1){
          showAudioNudge();
        }
      }, 600);
    }

    // Controles UI
    const playBtn = document.getElementById('playBtn');   // “Recibir invitación”
    const pauseBtn = document.getElementById('pauseBtn'); // “Parar la canción”

    playBtn.addEventListener('click', () => {
      if(ytPlayer){
        ytPlayer.playVideo();
        ytPlayer.unMute && ytPlayer.unMute();
      }
      hideAudioNudge();
    });

    pauseBtn.addEventListener('click', () => {
      if(ytPlayer){ ytPlayer.pauseVideo(); }
    });

    // Audio nudge
    const audioNudge = document.getElementById('audioNudge');
    const nudgePlay = document.getElementById('nudgePlay');
    const nudgeClose = document.getElementById('nudgeClose');

    function showAudioNudge(){ audioNudge.style.display = 'grid'; }
    function hideAudioNudge(){ audioNudge.style.display = 'none'; }

    nudgePlay.addEventListener('click', () => {
      if(ytPlayer){
        ytPlayer.playVideo();
        ytPlayer.unMute && ytPlayer.unMute();
      }
      hideAudioNudge();
    });
    nudgeClose.addEventListener('click', () => hideAudioNudge());

    // Modales con animación
    const mapModal = document.getElementById('mapModal');
    const mapBackdrop = document.getElementById('mapBackdrop');
    const openMap = document.getElementById('openMap');
    const openMap2 = document.getElementById('openMap2');
    const closeMap = document.getElementById('closeMap');

    const donModal = document.getElementById('donModal');
    const donBackdrop = document.getElementById('donBackdrop');
    const openDonate = document.getElementById('openDonate');
    const closeDonate = document.getElementById('closeDonate');

    function showModal(modal, backdrop){
      modal.style.display = 'grid';
      backdrop.style.display = 'block';
      // inicia animaciones
      backdrop.style.animation = 'backdrop-fade .18s ease forwards';
      const panel = modal.querySelector('.modal-panel');
      panel.style.animation = 'pop-in .22s cubic-bezier(.2,.85,.25,1) forwards';
    }
    function hideModal(modal, backdrop){
      const panel = modal.querySelector('.modal-panel');
      // animación de salida
      panel.style.animation = 'pop-out .16s ease forwards';
      backdrop.style.animation = 'none';
      backdrop.style.opacity = '0';
      // espera la salida para ocultar
      setTimeout(() => {
        modal.style.display = 'none';
        backdrop.style.display = 'none';
      }, 160);
    }

    openMap.addEventListener('click', () => {
      showModal(mapModal, mapBackdrop);
      ensureLeafletReady();
    });
    openMap2.addEventListener('click', () => {
      showModal(mapModal, mapBackdrop);
      ensureLeafletReady();
    });
    closeMap.addEventListener('click', () => hideModal(mapModal, mapBackdrop));
    mapBackdrop.addEventListener('click', () => hideModal(mapModal, mapBackdrop));

    openDonate.addEventListener('click', () => showModal(donModal, donBackdrop));
    closeDonate.addEventListener('click', () => hideModal(donModal, donBackdrop));
    donBackdrop.addEventListener('click', () => hideModal(donModal, donBackdrop));

    // Leaflet: mapa rápido y navegable sin login
    let leafletMap;
    let hasLeafletInit = false;
    function ensureLeafletReady(){
      if(!hasLeafletInit){
        // Coordenadas de San Juan, Argentina
        const sj = { lat: -31.5359, lng: -68.5115 };
        leafletMap = L.map('leafletMap', {
          zoomControl: true,
          attributionControl: false
        }).setView([sj.lat, sj.lng], 13);

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
          maxZoom: 19
        }).addTo(leafletMap);

        L.marker([sj.lat, sj.lng])
          .addTo(leafletMap)
          .bindPopup('Boda — San Juan, Argentina')
          .openPopup();

        hasLeafletInit = true;
        // Asegurar tamaño correcto al mostrarse el modal
        setTimeout(() => {
          leafletMap.invalidateSize();
        }, 250);
      } else {
        // Si ya está inicializado, revalida tamaño por si el modal estaba oculto
        setTimeout(() => leafletMap && leafletMap.invalidateSize(), 200);
      }
    }

    // Álbum: asegurar loop largo para pantallas grandes
    (function ensureLongLane(){
      const lane = document.getElementById('lane');
      const items = [...lane.children];
      const minWidth = window.innerWidth * 2;
      let total = 0;
      items.forEach(it => total += it.getBoundingClientRect().width + 12);
      if(total < minWidth){
        items.forEach(it => lane.appendChild(it.cloneNode(true)));
      }
    })();

    // Ajustes responsive adicionales para tocar el panel de música si el teclado móvil cubre parte
    window.addEventListener('resize', () => {
      // Podrías agregar lógica de reposicionamiento si detectás safe areas en iOS.
    });
  </script>
</body>
</html>
```
